'use client';

import { use, useEffect } from 'react';
import { usePropertyDetails } from "@/hooks/usePropertyDetails";
import PropertyDetailLoading from "@/components/PropertyDetailLoading";
import PropertiesError from "@/components/PropertiesError";

export default function PropertyPageMinimal({ params }: { params: Promise<{ id: string }> }) {
  const { id } = use(params);
  const { data: property, isLoading, isError, error, errorType, refetch } = usePropertyDetails(id);

  if (isLoading) {
    return <PropertyDetailLoading />;
  }

  if (isError || !property) {
    return (
      <PropertiesError
        error={error || new Error('Imóvel não encontrado')}
        errorType={errorType}
        onRetry={refetch}
      />
    );
  }

  return (
    <div className="min-h-screen bg-white p-8">
      <h1 className="text-4xl font-bold mb-4">✅ Página Funcionando!</h1>
      <div className="space-y-2">
        <p><strong>ID:</strong> {property.id}</p>
        <p><strong>Código:</strong> {property.code}</p>
        <p><strong>Título:</strong> {property.title}</p>
        <p><strong>Preço:</strong> R$ {property.pricing.sale?.toLocaleString('pt-BR')}</p>
      </div>
      <div className="mt-8 p-4 bg-green-100 border border-green-400 rounded">
        <p className="text-green-800">
          Se você vê esta mensagem, o problema não está nos dados do imóvel.
          O problema pode estar em um dos novos componentes visuais.
        </p>
      </div>
    </div>
  );
}

