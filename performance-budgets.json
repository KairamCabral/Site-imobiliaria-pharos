{
  "$schema": "https://json.schemastore.org/performance-budget.json",
  "name": "Pharos Imobiliária - Performance Budgets",
  "description": "Performance budgets para CI/CD checks",
  "version": "1.0.0",
  "budgets": [
    {
      "resourceSizes": [
        {
          "resourceType": "script",
          "budget": 350,
          "unit": "kibibyte"
        },
        {
          "resourceType": "stylesheet",
          "budget": 100,
          "unit": "kibibyte"
        },
        {
          "resourceType": "image",
          "budget": 500,
          "unit": "kibibyte"
        },
        {
          "resourceType": "font",
          "budget": 150,
          "unit": "kibibyte"
        },
        {
          "resourceType": "document",
          "budget": 50,
          "unit": "kibibyte"
        },
        {
          "resourceType": "total",
          "budget": 1500,
          "unit": "kibibyte"
        }
      ],
      "resourceCounts": [
        {
          "resourceType": "script",
          "budget": 15
        },
        {
          "resourceType": "stylesheet",
          "budget": 5
        },
        {
          "resourceType": "font",
          "budget": 3
        },
        {
          "resourceType": "third-party",
          "budget": 10
        }
      ]
    }
  ],
  "timings": [
    {
      "metric": "interactive",
      "budget": 3500,
      "tolerance": 500
    },
    {
      "metric": "first-contentful-paint",
      "budget": 1800,
      "tolerance": 200
    },
    {
      "metric": "speed-index",
      "budget": 3000,
      "tolerance": 300
    },
    {
      "metric": "largest-contentful-paint",
      "budget": 2500,
      "tolerance": 500
    },
    {
      "metric": "cumulative-layout-shift",
      "budget": 0.1,
      "tolerance": 0.05
    },
    {
      "metric": "max-potential-fid",
      "budget": 130,
      "tolerance": 20
    },
    {
      "metric": "total-blocking-time",
      "budget": 200,
      "tolerance": 50
    }
  ],
  "lighthouse": {
    "performance": {
      "budget": 90,
      "tolerance": 5
    },
    "accessibility": {
      "budget": 100,
      "tolerance": 0
    },
    "best-practices": {
      "budget": 95,
      "tolerance": 5
    },
    "seo": {
      "budget": 100,
      "tolerance": 0
    }
  },
  "pages": {
    "/": {
      "name": "Homepage",
      "timings": {
        "interactive": 3000,
        "first-contentful-paint": 1500,
        "largest-contentful-paint": 2000
      },
      "resourceSizes": {
        "total": 1200
      }
    },
    "/imoveis": {
      "name": "Listagem de Imóveis",
      "timings": {
        "interactive": 3500,
        "first-contentful-paint": 1800,
        "largest-contentful-paint": 2500
      },
      "resourceSizes": {
        "total": 1500
      }
    },
    "/imoveis/[id]": {
      "name": "Detalhe do Imóvel",
      "timings": {
        "interactive": 4000,
        "first-contentful-paint": 2000,
        "largest-contentful-paint": 3000
      },
      "resourceSizes": {
        "total": 2000
      }
    }
  },
  "thresholds": {
    "javascript": {
      "main-bundle": 250,
      "vendor-bundle": 350,
      "total": 600
    },
    "css": {
      "critical": 20,
      "total": 100
    },
    "images": {
      "hero": 150,
      "card": 50,
      "total-per-page": 500
    }
  },
  "checks": {
    "bundle-analysis": {
      "enabled": true,
      "failOn": "error"
    },
    "lighthouse-ci": {
      "enabled": true,
      "failOn": "error",
      "collect": {
        "numberOfRuns": 3,
        "settings": {
          "preset": "desktop",
          "throttling": {
            "rttMs": 40,
            "throughputKbps": 10240,
            "cpuSlowdownMultiplier": 1
          }
        }
      },
      "assert": {
        "assertions": {
          "categories:performance": ["error", { "minScore": 0.9 }],
          "categories:accessibility": ["error", { "minScore": 1.0 }],
          "categories:best-practices": ["error", { "minScore": 0.95 }],
          "categories:seo": ["error", { "minScore": 1.0 }],
          "first-contentful-paint": ["error", { "maxNumericValue": 1800 }],
          "largest-contentful-paint": ["error", { "maxNumericValue": 2500 }],
          "cumulative-layout-shift": ["error", { "maxNumericValue": 0.1 }],
          "total-blocking-time": ["error", { "maxNumericValue": 200 }],
          "speed-index": ["error", { "maxNumericValue": 3000 }]
        }
      }
    }
  }
}

